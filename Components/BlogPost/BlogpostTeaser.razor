@page "/BlogpostTeaser"

@using System.Net.Http
@using System
@using MyPortfolio.Themes
@using MyPortfolio.Services

@inject IConfiguration Configuration
@inject HttpClient Http
@inject ContentService ContentService

<MudItem sm="12" md="6">
    <MudCard Outlined="true" class="rounded-lg" Style="@($"background-color: {backgroundColor}; height:100%;")">
        <MudCardHeader>
            <CardHeaderAvatar>
                <MudAvatar Color="Color.Secondary">I</MudAvatar>
            </CardHeaderAvatar>
            <CardHeaderContent>
                <MudText Typo="Typo.body1">@Title</MudText>
                <MudText Typo="Typo.body2">@EditDate</MudText>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardMedia Image="@ImageUrl" Height="250" />
        <MudCardContent style="">
            <MudText Typo="Typo.body2">@TeaserContent</MudText>
        </MudCardContent>
        <MudCardActions>
            <MudIconButton Icon="@Icons.Material.Filled.Share" Color="Color.Default" />
            @if (Tags != null)
            {
                @foreach (var tag in Tags)
                {
                    <MudChip T="string" Variant="Variant.Text" Color="Color.Secondary">@tag</MudChip>
                }
            }
        </MudCardActions>
    </MudCard>
</MudItem>



@code {
    private string? color;
    private string? backgroundColor;
    [Parameter]
    public List<string>? Tags { get; set; }
    [Parameter]
    public string? ImageUrl { get; set; } =
    "https://imagedelivery.net/P9L8ltIQd-qvSr7N3Sj8uw/26c9b99c-b595-440b-a690-7370ecca6400/public";
    [Parameter]
    public string? Title { get; set; } = "Title";
    [Parameter]
    public string? EditDate { get; set; }
    [Parameter]
    public MarkupString TeaserContent { get; set; }
    [CascadingParameter]
    public Palette? currentPalette { get; set; }

    protected override void OnParametersSet()
    {
        // Ensure the component re-renders when currentPalette changes
        base.OnParametersSet();
        StateHasChanged();


        color = currentPalette?.TextPrimary.ToString();
        backgroundColor = currentPalette?.Tertiary.ToString();

    }

}